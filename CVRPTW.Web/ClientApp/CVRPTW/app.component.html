<header>Capacitated Vehicle Routing Problem with Time Windows</header>

<section>
  <div class="side-container">
    <data-settings></data-settings>
  </div>
  <div class="main-container" *ngIf="viewModel">
    <agm-map class="map" [latitude]="viewModel.mapLatitude ? viewModel.mapLatitude : 0" [longitude]="viewModel.mapLongitude ? viewModel.mapLongitude : 0" [showDefaultInfoWindow]="false" [styles]="viewModel.mapStyle">
      <agm-overlay *ngFor="let booking of vehicleRoutingModel?.bookings" [latitude]="booking.location.latitude" [longitude]="booking.location.longitude">
        <div class="booking-detail">
          <h3>{{booking.title}} - <strong style="color: red;">{{booking.order}}</strong></h3>
          <p>
            {{booking.serviceFromTime | date :'hh:mm a'}} ~ {{booking.serviceToTime | date: "hh:mm a"}}
          </p>
          <p>
            Service Time: {{booking.serviceMins}} mins
          </p>
          <span>
            FuelType(s): <span *ngFor="let fueltype of booking.fuelTypes; last as isLast">{{fueltype}}<span *ngIf="!isLast">, </span></span>
          </span>
        </div>
      </agm-overlay>
      <ul>
        <li *ngFor="let booking of vehicleRoutingModel?.bookings">
          <agm-polyline *ngFor="let point of booking.points; index as pointIndex" strokeColor="rgba(5, 5, 5, 0.1)">
            <agm-polyline-point [latitude]="point.latitude" [longitude]="point.longitude"></agm-polyline-point>
            <agm-polyline-point [latitude]="booking.location.latitude" [longitude]="booking.location.longitude"></agm-polyline-point>
          </agm-polyline>
          <agm-polyline strokeColor="#40bfc1" [zIndex]="1" [strokeWeight]="6">
            <agm-polyline-point [latitude]="booking.location.latitude" [longitude]="booking.location.longitude"></agm-polyline-point>
            <agm-polyline-point *ngIf="vehicleRoutingModel!.bookings[booking.nextNodeIndex] != undefined" [latitude]="vehicleRoutingModel!.bookings[booking.nextNodeIndex].location.latitude" [longitude]="vehicleRoutingModel!.bookings[booking.nextNodeIndex].location.longitude"></agm-polyline-point>
          </agm-polyline>
        </li>
      </ul>
    </agm-map>
  </div>
</section>
<router-outlet></router-outlet>
